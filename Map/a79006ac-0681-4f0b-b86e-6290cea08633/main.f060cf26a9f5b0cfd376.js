"use strict";(self.webpackChunkbuilder=self.webpackChunkbuilder||[]).push([[637],{416:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ct});var r=n(966),o=n.n(r),l=n(260),a=n(204),i=n(220),c=n(372),u=(n(918),n(396),n(406)),s=n(256);window.twind||(i.setup({theme:{extend:{colors:s}},plugins:{aspect:u.D}}),window.twind=i);var f,m,p,d,y,b,g,v,h,w,O,j,E=i.tw,x=i.apply,S=n(772),P=n(607),N=n(855);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function C(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L,T,_,D,F=function(e){if(e){var t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(t)}return null},M=function(e,t){var n=(0,N.getProfileTypes)(e,t).locationSchema;return A({section:"research_places",field:"address"},void 0===n?{}:n)},R={"project/profile":A(A({},M("project","profile")),{},{titleField:"project_name",getCardMarkup:{side:function(e){var t=e.start_date,n=e.end_date;return t||n?o().createElement("p",{className:E(f||(f=C(["text-sm text-gray-500 mt-1"])))},F(t)," - ",F(n)):null},main:function(e){var t=e.start_date,n=e.end_date,r=e.description,l=e.activeLang;return o().createElement(o().Fragment,null,t||n?o().createElement("p",{className:E(m||(m=C(["text-sm text-gray-500 mt-1"])))},F(t)," -"," ",F(n)):null,r?o().createElement("div",{dangerouslySetInnerHTML:{__html:(0,N.localize)(r,"",l)},className:E(p||(p=C(["text-sm mt-2"])))}):null)}}}),"groups/profile":A(A({},M("groups","profile")),{},{titleField:"group_name",getCardMarkup:{side:function(e){var t=e.start_date,n=e.end_date;return t||n?o().createElement("p",{className:E(d||(d=C(["text-sm text-gray-500 mt-1"])))},F(t)," - ",F(n)):null},main:function(e){var t=e.start_date,n=e.end_date,r=e.description,l=e.activeLang;return o().createElement(o().Fragment,null,t||n?o().createElement("p",{className:E(y||(y=C(["text-sm text-gray-500 mt-1"])))},F(t)," -"," ",F(n)):null,r?o().createElement("div",{dangerouslySetInnerHTML:{__html:(0,N.localize)(r,"",l)},className:E(b||(b=C(["text-sm mt-2"])))}):null)}}}),"units/profile":A(A({},M("units","profile")),{},{titleField:"name",getCardMarkup:{side:function(e){var t=e.start_date,n=e.end_date;return t||n?o().createElement("p",{className:E(g||(g=C(["text-sm text-gray-500 mt-1"])))},F(t)," - ",F(n)):null},main:function(e){var t=e.start_date,n=e.end_date,r=e.description,l=e.activeLang;return o().createElement(o().Fragment,null,t||n?o().createElement("p",{className:E(v||(v=C(["text-sm text-gray-500 mt-1"])))},F(t)," -"," ",F(n)):null,r?o().createElement("div",{dangerouslySetInnerHTML:{__html:(0,N.localize)(r,"",l)},className:E(h||(h=C(["text-sm mt-2"])))}):null)}}}),"equipment/profile":A(A({},M("resources","profile")),{},{titleField:"equipment_name",getCardMarkup:{side:function(){return null},main:function(){return null}}}),"members/profile":A(A({},M("members","profile")),{},{titleField:"first_name",getCardMarkup:{side:function(e){var t=e.start_date,n=e.end_date;return t||n?o().createElement("p",{className:E(w||(w=C(["text-sm text-gray-500 mt-1"])))},F(t)," - ",F(n)):null},main:function(e){var t=e.start_date,n=e.end_date,r=e.description,l=e.activeLang;return o().createElement(o().Fragment,null,t||n?o().createElement("p",{className:E(O||(O=C(["text-sm text-gray-500 mt-1"])))},F(t)," -"," ",F(n)):null,r?o().createElement("div",{dangerouslySetInnerHTML:{__html:(0,N.localize)(r,"",l)},className:E(j||(j=C(["text-sm mt-2"])))}):null)}}})},U=function(e,t,n){t=function(e){if("string"!=typeof e)return e;var t=[];return e.split(".").forEach((function(e){e.split(/\[([^}]+)\]/g).forEach((function(e){e.length>0&&t.push(e)}))})),t}(t);for(var r=e,o=0;o<t.length;o++){if(!r[t[o]])return n;r=r[t[o]]}return r};function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(null==R?void 0:R[e])||{};return t?U(n,t):n}function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}var Q=["profileType","contentId","head","activeLang","onClick","padding","mode"];function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return(t=J(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function J(e){var t=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===B(t)?t:String(t)}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function V(e){var t,n,r=e.profileType,l=e.contentId,a=e.head,i=e.activeLang,c=e.onClick,u=e.padding,s=void 0===u?"p-3":u,f=e.mode,m=K(e,Q),p=H(r,"getCardMarkup.".concat(f)),d=H(r),y=d.section,b=d.field,g=d.titleField,v=(t=r.split("/"),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l,a,i=[],c=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=v[0],w=v[1],O=a[g],j=a._banner,x=void 0===j?"":j,S=m[y]||{},P=S[b],k=K(S,[b].map(J));return o().createElement("div",{className:E(L||(L=G(["w-full flex "," space-x-3 cursor-pointer hover:bg-gray-50"])),s),onMouseDown:c},o().createElement("div",{className:E(T||(T=G(["w-16 h-16 p-1 flex-shrink-0 overflow-hidden"])))},o().createElement(N.ProfileImage,{contentType:h,viewType:w,contentId:l,version:x,type:"banner"})),o().createElement("div",{style:{width:"calc(100% - 76px)"}},o().createElement("p",{className:E(_||(_=G(["text-base font-medium text-gray-900 truncate"]))),title:O},O),o().createElement("p",{className:E(D||(D=G(["text-gray-700 text-sm mt-2"])))},P.formatted_address),p($($({},k),{},{activeLang:i}))))}var Y,Z,ee,te,ne,re,oe,le,ae,ie,ce,ue,se,fe,me,pe,de,ye,be,ge,ve,he,we,Oe=n(138),je=n.n(Oe);function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l,a,i=[],c=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ne=function(e){var t=e.contentRenderer,n=e.profile,a=e.tab,i=(0,l.useLocation)().search.split("&").filter((function(e){return!e.startsWith("tab=")})).join("&"),c=n.contentId;return o().createElement(r.Suspense,{fallback:o().createElement("div",{className:E(Y||(Y=Pe(["w-full h-full flex items-center justify-center"])))},o().createElement(je(),{css:"display:block;",color:"#333",size:"20px"}))},o().createElement("div",{className:E(Z||(Z=Pe(["w-full h-full divide-y divide-gray-300"])))},o().createElement(t,{contentId:c,tab:a||"about",sectionProps:{width:"100%",rounded:!1,noBorder:!0,paddingTop:"4",paddingBottom:"4",paddingLeft:"4",paddingRight:"4",headerMarginBottom:"3"},tabToPrefix:"".concat(i,"&tab="),contentRenderSettings:{containerSize:"sm",getAddressToUrl:function(e){var t=e.lat,n=e.lng,r=e.contentId;return"?lat=".concat(t,"&lng=").concat(n,"&zoom=16&detail=").concat(r)}}})))},ke=function(e){var t=e.profiles,n=e.activeLang,a=e.profileType,i=e.profileId,c=H(a),u=c.section,s=c.field,f=c.titleField,m=xe((0,r.useState)(""),2),p=m[0],d=m[1],y=xe((0,r.useState)(!0),2),b=y[0],g=y[1],v=xe((0,r.useState)(!1),2),h=v[0],w=v[1],O=xe((0,r.useState)(!1),2),j=O[0],x=O[1],N=(0,l.useNavigate)(),k=(0,l.useLocation)().search.split("&"),C=[].concat.apply([],Object.values(t));(0,r.useEffect)((function(){if(i){var e=C.find((function(e){return e.contentId===i}));e&&d(e.head[f])}}),[t,i]);var I=p?C.filter((function(e){return e.head[f].toLowerCase().includes(p.toLowerCase())})):[],A=function(e){var t,n,r=null==e||null===(t=e[u])||void 0===t?void 0:t[s],o=(null==r||null===(n=r.geometry)||void 0===n?void 0:n.location)||{},l=o.lat,a=o.lng;l&&a&&(g(!1),d(e.head[f]),N("?lat=".concat(l,"&lng=").concat(a,"&zoom=16&detail=").concat(e.contentId)))};return o().createElement("div",{className:E(ee||(ee=Pe(["p-3 w-full"])))},o().createElement("div",{className:E(te||(te=Pe(["relative flex justify-between pl-4 pr-1.5 py-2 w-full border border-gray-300 bg-white group "," !shadow-lg"])),b&&j&&I.length?"rounded-t-lg":"rounded-lg")},o().createElement("input",{placeholder:"Search profile name",className:E(ne||(ne=Pe(["flex-1 focus:outline-none text-gray-900"]))),value:p,onChange:function(e){w(!1),d(e.target.value)},onFocus:function(){g(!0),x(!0)},onBlur:function(){x(!1)}}),p&&!i?o().createElement("button",{className:E(re||(re=Pe(["absolute right-12 top-2.5 h-6 w-6 group-hover:visible invisible text-gray-400 hover:text-gray-700 focus:outline-none"]))),onClick:function(){d("")}},o().createElement(P.QAE,{className:E(oe||(oe=Pe(["w-full h-full"])))})):null,o().createElement("button",{className:E(le||(le=Pe(["w-7 h-7 p-1 text-gray-500 ml-2 mr-1"])))},o().createElement(S.G4C,{className:E(ae||(ae=Pe(["h-full w-full"])))})),i?o().createElement("button",{className:E(ie||(ie=Pe(["w-9 h-7 border-l ml-1 p-1 pl-2 text-gray-500 focus:outline-none"]))),onClick:function(){d("");var e=k.filter((function(e){return!e.startsWith("detail=")})).join("&");N(e)}},o().createElement(S.apv,{className:E(ce||(ce=Pe(["h-full w-full"])))})):null),b?o().createElement(o().Fragment,null,j&&I.length?o().createElement("div",{className:E(ue||(ue=Pe(["border border-gray-300 rounded-b-lg bg-white mt-px !shadow-md divide-y overflow-hidden overflow-y-auto overscroll-contain"]))),style:{maxHeight:"min(50vh, 400px)"}},I.map((function(e,t){return o().createElement(V,Ee({key:t},e,{activeLang:n,onClick:function(){return A(e)},profileType:a,mode:"side"}))}))):null,I.length?null:o().createElement("div",{className:E(se||(se=Pe(["border border-gray-300 rounded-lg bg-white mt-1 !shadow-md overflow-hidden"])))},o().createElement("div",{className:E(fe||(fe=Pe(["flex items-center justify-center space-x-2 py-2 px-2 group hover:bg-gray-50 cursor-pointer ",""])),h?"border-b":""),onClick:function(){w(!h)}},o().createElement("p",{className:E(me||(me=Pe(["text-sm text-gray-500 group-hover:text-gray-700"])))},h?"Hide all profiles":"Show all profiles"),h?o().createElement(S.ALZ,{className:E(pe||(pe=Pe(["w-5 h-5 text-gray-500 group-hover:text-gray-700"])))}):o().createElement(S.kWQ,{className:E(de||(de=Pe(["w-5 h-5 text-gray-500 group-hover:text-gray-700"])))})),h?o().createElement("div",{className:E(ye||(ye=Pe(["divide-y overflow-hidden overflow-y-auto overscroll-contain"]))),style:{maxHeight:"min(70vh, 600px)"}},C.map((function(e,t){return o().createElement(V,Ee({key:t},e,{activeLang:n,onClick:function(){return A(e)},profileType:a,mode:"side"}))}))):null)):null)};function Ce(e){var t=e.profiles,n=e.profileType,l=e.profileId,a=e.activeLang,i=e.tab,c=xe((0,r.useState)(!0),2),u=c[0],s=c[1],f=xe((0,r.useState)(null),2),m=f[0],p=f[1],d=[].concat.apply([],Object.values(t)).find((function(e){return e.contentId===l}));return(0,r.useEffect)((function(){null!=d&&d.contentId&&s(!0)}),[null==d?void 0:d.contentId]),(0,r.useEffect)((function(){p((0,r.lazy)((function(){return uniweb.getProfileRenderer(n).catch((function(){return{default:function(){return null}}}))})))}),[n]),o().createElement(o().Fragment,null,o().createElement("div",{className:E(be||(be=Pe(["absolute top-0 left-0 z-10 ",""])),u?"w-96":"hidden")},o().createElement(ke,{profiles:t,activeLang:a,profileType:n,profileId:l})),d?o().createElement("div",{className:E(ge||(ge=Pe(["absolute top-0 left-0  "," h-full bg-white overflow-hidden overflow-y-scroll overscroll-none"])),u?"w-96":"w-0"),style:{zIndex:9}},o().createElement(Ne,{contentRenderer:m,profile:d,tab:i})):null,d?o().createElement("button",{className:E(ve||(ve=Pe(["absolute ","  z-10 h-12 w-5 border border-l-0 rounded-r-xl bg-gray-50 focus:outline-none hover:bg-white"])),u?"left-96":"left-0 !shadow-md"),style:{top:"calc(50% - 10px)"},onClick:function(){s(!u)}},u?o().createElement(S.PSe,{className:E(he||(he=Pe(["w-4 h-4 text-gray-500 hover:text-gray-700"])))}):o().createElement(S.yoF,{className:E(we||(we=Pe(["w-4 h-4 text-gray-500 hover:text-gray-700"])))})):null)}function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}var Ae=["head"];function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ie(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ie(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l,a,i=[],c=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fe,Me,Re,Ue,He=function(e,t){var n=H(t),r=n.section,o=n.field;return(0,N.getListProfileItems)(e,"",Te({},t,{section:r})).then((function(e){var t={};return e.forEach((function(e){var n=function(e,t,n){var r=e.head,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ae),l=e[t],a=[];return l&&Object.keys(l).length&&Object.entries(l).forEach((function(e){var l,i,c=_e(e,2),u=c[0],s=c[1],f=(null===(l=s[n])||void 0===l||null===(i=l.geometry)||void 0===i?void 0:i.location)||{},m=f.lat,p=f.lng;m&&p&&a.push(["".concat(m,"_").concat(p),Le(Le({},o),{},Te({head:JSON.parse(r)},t,Le(Le({},s),{},{itemId:u})))])})),a.length?a:null}(e,r,o);n&&n.forEach((function(e){var n=_e(e,2),r=n[0],o=n[1];t[r]?t[r].push(o):t[r]=[o]}))})),t}))},Be=n(798);function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe.apply(this,arguments)}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l,a,i=[],c=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ge,Je,Xe,Ke,Ve,Ye=(0,c.css)(Fe||(Fe=qe(["\n    ",";\n\n    iframe ~ div {\n        border: 0px !important;\n    }\n\n    div[class^='gm-style-iw'] + button {\n        ","\n    }\n\n    .gm-fullscreen-control {\n        display: none;\n    }\n\n    .gm-iv-container {\n        margin-top: 75px !important;\n    }\n\n    .gm-iv-address {\n        margin-top: 75px !important;\n    }\n\n    .gm-iv-address-link {\n        margin-top: 66px !important;\n    }\n\n    .gm-iv-marker {\n        margin-top: 66px !important;\n    }\n"])),x("w-full h-full absolute top-0 left-0"),x("focus:outline-none")),Ze=(0,c.css)(Me||(Me=qe(["\n    max-height: 260px;\n    ","\n\n    & > div:not(:first-child) {\n        margin-top: 8px;\n        padding-top: 15px;\n    }\n"])),x("divide-y")),et=function(e){var t=e.position,n=e.clusterer,r=e.profile,l=e.onClick,a=e.onDblClick,i=1===r.length?void 0:{text:r.length.toString()};return o().createElement(Be.Jx,{position:t,clusterer:n,label:i,animation:google.maps.Animation.DROP,onClick:function(){return l(t.lat,t.lng)},onDblClick:function(){return a(t.lat,t.lng)}})},tt=function(e){var t=e.profileType,n=e.profiles,r=e.targetGeo,a=e.onClose,i=e.activeLang,c=e.zoom,u=e.lat,s=e.lng,f=e.tab,m=(0,l.useNavigate)(),p=We(r.split("_"),2),d=p[0],y=p[1];return n[r]?o().createElement(Be.nx,{options:{maxWidth:400,minWidth:300,pixelOffset:new window.google.maps.Size(0,-43)},position:{lat:Number(d),lng:Number(y)},onCloseClick:a},o().createElement("div",{className:E(Re||(Re=qe(["",""])),Ze)},n[r].map((function(e,n){return o().createElement(V,Qe({key:n},e,{activeLang:i,onClick:function(){return t=e,void m("?lat=".concat(u,"&lng=").concat(s,"&zoom=").concat(c,"&detail=").concat(t.contentId).concat(f?"&tab=".concat(f):""));var t},padding:"p-1",profileType:t,mode:"main"}))})))):null};function nt(e){var t=e.profileType,n=e.profiles,a=e.lat,i=void 0===a?"":a,c=e.lng,u=void 0===c?"":c,s=e.zoom,f=e.activeLang,m=e.profileId,p=e.setIsLoading,d=e.tab,y=void 0===d?null:d,b=(0,l.useNavigate)(),g=We((0,r.useState)(null),2),v=g[0],h=g[1],w=We((0,r.useState)({lat:49.9393854,lng:-119.3969514}),2),O=w[0],j=w[1],x=We((0,r.useState)(""),2),S=x[0],P=x[1],N=(0,Be.Ji)({googleMapsApiKey:"AIzaSyAeR961Exdeo6aJPQvtHPQBUqPGDPVaAFM",language:"en"}),k=N.isLoaded;N.loadError,(0,r.useEffect)((function(){i&&u&&(O.lat!=i||O.lng!=u)&&j({lat:Number(i),lng:Number(u)})}),[O,i,u]);var C=(0,r.useCallback)((function(e){p&&p(!1),h(e)}),[]),I=(0,r.useCallback)((function(){h(null)}),[]),A=(0,r.useCallback)((function(){if(v){var e=v.center.lat(),t=v.center.lng(),n=m?"&detail=".concat(m):"",r=y?"&tab=".concat(y):"";b("?lat=".concat(e,"&lng=").concat(t,"&zoom=").concat(v.zoom).concat(n).concat(r))}}),[v,m,y]),z=(0,r.useCallback)((function(e,t){P("".concat(e,"_").concat(t))}),[O,v]),L=(0,r.useCallback)((function(e,t){P("".concat(e,"_").concat(t));var n=m?"&detail=".concat(m):"",r=y?"&tab=".concat(y):"";b("?lat=".concat(e,"&lng=").concat(t,"&zoom=").concat(v.zoom+2).concat(n).concat(r))}),[O,v,m,y]),T=(0,r.useCallback)((function(){P("")}),[]);return k?o().createElement(Be.b6,{mapContainerClassName:E(Ue||(Ue=qe(["",""])),Ye),onLoad:C,onUnmount:I,onDragEnd:A,center:O,options:{mapTypeControl:!1,fullScreenControl:!1},zoom:Number(s)>0?Number(s):4},o().createElement(Be.XL,{averageCenter:!0},(function(e){return Object.entries(n).map((function(t,n){var l=We(t,2),a=l[0],i=l[1],c=We(a.split("_"),2),u=c[0],s=c[1],f={lat:Number(u),lng:Number(s)};return o().createElement(r.Fragment,{key:n},o().createElement(et,{position:f,clusterer:e,profile:i,onClick:z,onDblClick:L}))}))})),v?o().createElement(tt,{profileType:t,profiles:n,targetGeo:S,onClose:T,activeLang:f,zoom:v.zoom,lat:v.center.lat(),lng:v.center.lng(),tab:y}):null):null}function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rt.apply(this,arguments)}function ot(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l,a,i=[],c=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var it=function(e){var t=e.contentType,n=e.viewType,i=e.dataSource,c=void 0===i?{}:i,u=e.useDS,s=e.activeLang,f="".concat(t,"/").concat(n),m=u(c),p=new URLSearchParams((0,l.useLocation)().search),d=lt((0,r.useState)({}),2),y=d[0],b=d[1],g=lt((0,r.useState)(!1),2),v=g[0],h=g[1],w=lt((0,r.useState)(!0),2),O=w[0],j=w[1],x=null==m?void 0:m.id,S=p.get("lat"),P=p.get("lng"),N=p.get("zoom"),k=p.get("detail"),C=p.get("tab"),I=window.frameElement,A=!1;return I&&I.hasAttribute("allowfullscreen")&&"false"!==I.getAttribute("allowfullscreen")&&(A=!0),(0,r.useEffect)((function(){var e=function(e){var t,n;null!==(t=window.parent)&&void 0!==t&&null!==(n=t.document)&&void 0!==n&&n.fullscreenElement?h(!0):h(!1)};return I&&I.addEventListener("fullscreenchange",e),function(){I&&I.removeEventListener("fullscreenchange",e)}}),[]),(0,r.useEffect)((function(){He(x,f).then((function(e){b(e)}))}),[x,f]),o().createElement("div",{className:E(Ge||(Ge=ot(["w-screen h-screen relative"])))},O?o().createElement("div",{className:E(Je||(Je=ot(["w-full h-full bg-white flex items-center justify-center"]))),style:{zIndex:1}},o().createElement(je(),{css:"display:block;",color:"#333",size:"25px"})):null,o().createElement(Ce,{profiles:y,profileType:f,profileId:k,tab:C}),o().createElement(nt,{profileType:f,profiles:y,lat:S,lng:P,zoom:N,profileId:k,tab:C,activeLang:s,setIsLoading:j}),A?o().createElement("button",{className:E(Xe||(Xe=ot(["absolute right-2 bg-gray-200 rounded-md top-2 w-8 h-8 p-1"]))),onClick:function(){var e,t;null!==(e=window.parent)&&void 0!==e&&null!==(t=e.document)&&void 0!==t&&t.fullscreenElement?window.parent.document.exitFullscreen():I.requestFullscreen().catch((function(e){alert("Error attempting to enable fullscreen mode: ".concat(e.message," (").concat(e.name,")"))}))}},v?o().createElement(a.X3m,{className:E(Ke||(Ke=ot(["w-full h-full text-gray-600 hover:text-white"])))}):o().createElement(a.YBQ,{className:E(Ve||(Ve=ot(["w-full h-full text-gray-600 hover:text-white"])))})):null)};function ct(e){var t=(e.templateParams||{}).target_profile,n=lt((void 0===t?"units/profile":t).split("/"),2),r=n[0],a=n[1];return o().createElement(l.Routes,null,o().createElement(l.Route,{index:!0,element:o().createElement(it,rt({},e,{contentType:r,viewType:a}))}))}}}]);